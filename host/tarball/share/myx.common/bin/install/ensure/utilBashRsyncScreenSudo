#!/usr/bin/env bash

##############################################################################
#
# this script overrides the default implementation in order to try to install
# all packages required using single 'pkg' utility call (batch) 
#
##############################################################################

set -e

if [ "`type -t UserRequireRoot`" != "function" ] ; then
. "/usr/local/share/myx.common/bin/user/requireRoot"
fi
UserRequireRoot 

LIST=""

for PKG in bash rsync screen sudo $@ ; do
	[ ! -z "`which $PKG`" ] && echo "ensure: $PKG already present, skip" >&2 || LIST="$LIST $PKG"
done

[ -z "$LIST" ] && echo "all packages installed." >&2 || pkg install -y $LIST
