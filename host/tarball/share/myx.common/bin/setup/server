#!/usr/bin/env bash

set -e

. /usr/local/share/myx.common/include/subr-universal.sh

UserRequireRoot

InternReplaceLine /boot/loader.conf '^autoboot_delay=*' 'autoboot_delay="2"'

myx.common lib/tuneNetworkSpeed

# extra software
myx.common install/ensure/utilBashRsyncScreenSudo curl nano wget

InternReplaceLine /usr/local/etc/sudoers '^%wheel ALL=*' '%wheel ALL=(ALL) ALL'

# rc.conf
sysrc \
	sshd_enable=YES \
	moused_enable=YES \
	ntpd_enable=YES \
	ntpdate_enable=YES \
	fsck_y_enable=YES

# Deliberately excluded:
#	powerd_enable=YES \


# update NTP date NOW!
ntpdate -u -b pool.ntp.org || true

test "$1" != "--postfix-mta" || myx.common lib/installPostfixMTA 
