#!/usr/bin/env bash

set -e

# >>>                    <<<
# >>>>>  COPIED  FROM  <<<<<
# >>>                    <<<
# > ../../include/subr.sh  <
# >>>                    <<<

InternReplaceLine(){
	local FL="$1" FR="$2" TO="$3"
	
	grep -q "$FR" $FL && \
		cp -pf "$FL" "$FL.bak" && \
		chmod 664 "$FL.bak" && \
		grep -v "$FR" "$FL.bak" > "$FL" && \
		rm "$FL.bak"
		
	grep -q -x -F "$TO" "$FL" || \
		echo "$TO" >> "$FL"
		
	return 0;
}


AFILE="$1"
AFROM="$2"
AWITH="$3"

InternReplaceLine "$AFILE" "$AFROM" "$AWITH"
